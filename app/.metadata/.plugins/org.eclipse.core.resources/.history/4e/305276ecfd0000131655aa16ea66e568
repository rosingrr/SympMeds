package com.example.sympmeds;

import java.util.ArrayList;

import jxl.Cell;
import jxl.Sheet;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class SymptomList extends Activity {
	public final static String DRUG_LIST = "com.example.sympmeds.LIST";
	private final static int SYMPTOM_SHEET = 0;
	private final static int STARTING_ROW = 1;
	private final static int SYMPTOM_NAME_COL = 0;

	/**onCreate() is called when the SymptomList activity is started, which is when the
	 * Start button from the MainActivity is pushed.
	 */
	@Override
	protected void onCreate(Bundle savedInstanceState) {
		//this is default code
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_symptom_list);
		
		//get symptom sheet from the database variable
		Sheet sheet = MainActivity.database.getSheet(SYMPTOM_SHEET);
		
        //put the list of symptoms into an array
		ArrayList<String> arrayList = new ArrayList<String>();
		for(int i = STARTING_ROW; i < sheet.getRows(); i++){
			Cell cell = sheet.getCell(SYMPTOM_NAME_COL, i);
			String text = cell.getContents();
			arrayList.add(text);
		}
		
        //enter array into spinner
		String[] array = arrayList.toArray(new String[arrayList.size()]);
		Spinner spinner = (Spinner) findViewById(R.id.symptom_spinner);
		ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(this, android.R.layout.simple_spinner_item, array);
		adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
		spinner.setAdapter(adapter);
	}

    /**
     * This was generated by default by Eclipse
     */
	@Override
	public boolean onCreateOptionsMenu(Menu menu) {
		// Inflate the menu; this adds items to the action bar if it is present.
		getMenuInflater().inflate(R.menu.symptom_list, menu);
		return true;
	}

    /** Called when the user clicks the Search button.
     * It calls up the DrugList activity with all the information that is respect to
     * what is selected from the spinner in this activity.
     */
    public void search (View view) {
    	// Do something in response to button
		Intent intent = new Intent(this, DrugList.class);
		Spinner spinner = (Spinner) findViewById(R.id.symptom_spinner);
		String text = spinner.getSelectedItem().toString();
		intent.putExtra(DRUG_LIST, text);
		startActivity(intent);
    }
}